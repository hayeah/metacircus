<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>PHP is Plenty Good - Howard Yeh | Metacircus</title>
   <meta name="author" content="Howard Yeh" />
   
   <link href="http://feeds2.feedburner.com/metacircus" rel="alternate" title="Metacircus" type="application/atom+xml" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
</head>
<body>

<div class="site">
  <div class="title">
    <h1><a href="/">Metacircus <span class="name"> by Howard Yeh </span></a></h1>
    <h2 class="meta">Words Are But Shattered Mirror of Thoughts</h2>
  </div>

  <div class="main">
    <div id="post">
<p>Many hackers I respect say how great Jon Bentley&#8217;s <a href='http://www.amazon.com/Programming-Pearls-2nd-Jon-Bentley/dp/0201657880'><em>Programming Pearls</em></a> is. I finally bought my own copy, and it really is that good. I am reading column 6, <em>Perspective on Performance</em>, which starts with a case study about optimizing the n-body problem, done by Andrew Appel. Initially, for n=10000, it would take a year, and at the end, it took less than a day, more than 400x improvement. I was so struck by the story, that I stopped reading, to quote the case in full:</p>

<ul>
<li>
<p><em>Algorithms and Data Structures.</em> Appel&#8217;s first priority was to find an efficient algorithm. He was able to reduce the O(n^2) cost per time step to O(n log n) by representing the physical objects as leaves in a binary tree; higher nodes represent clusters of objects. The force operating on a particular object can be approximated by the force exerted by the large clusters; Appel showed that this approximation does not bias the simulation. The tree has roughly log n levels, and the resulting O(n log n) algorithm is similar in spirit to the divide-and-conquer algorithm in Section 8.3. This change reduced the run time of the program by a factor of 12.</p>
</li>

<li>
<p><em>Algorithm Tuning.</em> The simple algorithm always uses small time steps to handle the rare case that two particles come close to one another. The tree data structure allows such pairs to be recognized and handled by a special function. That doubles the time step size and thereby halves the run time of the program.</p>
</li>

<li>
<p><em>Data Structure Reorganization.</em> The tree that represents the initial set of objects is quite poor at representing later sets. Reconfiguring the data structure at each time step costs a little time, but reduces the number of local calculations and thereby halves the total run time.</p>
</li>

<li>
<p><em>Code Tuning.</em> Due to additional numerical accuracy provided by the tree, 64-bit double-precision floating point numbers could be replaced by 32-bit single-precision numbers; that change halved the run time. Profiling the program showed that 98 percent of the run time was spent in one function; rewriting that code in assembly language increased its speed by a factor of 2.5.</p>
</li>

<li>
<p><em>Hardware.</em> After all the above changes, the program still required <strong>two days of time on a departmental machine that cost a quarter of a million dollars</strong>, and several runs of the program were desired. Appel therefore moved the program to a slightly more expensive machine equipped with a floating point accelerator, which halved its run time again.</p>
</li>
</ul>

<p>End quote. <strong>QUARTER OF A MILLION DOLLARS</strong>! <em>1985 dollars</em>. That is amazing. The length to which Appel had gone for performance tuning had <em>REAL</em> values, not just some idle academic challenge.</p>

<p>This case also reminds me to ask tough questions: what is it about what I do, how I do it, that has <em>ramifications in reality</em>?. How much value are my tests worth? How much value is my continuous integration setup? Do I have an expectation of what and how much feature X would give me, so at least I know if I had fallen short of that expectation.</p>

<p>There are metrics that clearly matters. How much profit am I making? How fast is my audience growing? These are fine, hard facts. But I don&#8217;t even know where to begin to find out if the &#8220;intangibles&#8221; matter at all. How do I even know that my code is &#8220;maintainable&#8221;? What does it mean for my code to be &#8220;well tested&#8221;? I certainly have a sense of Beauty (without the scare-quotes), but again, can I afford Beauty?</p>

<p>Lacking any good evidence, perhaps all we have to go on is common sense. Beyond a certain point, whatever practice that we adopt can become a fetish. Does 100% test coverage matter? Most likely not. If absolute reliability is crucial, say nuclear reactor control, you don&#8217;t get reliability out of test coverage anyway. Reliability comes out of redundancy.</p>

<p>Some testing is surely good, so my common sense (qua experience) tells me, but when does it become a fetish? Does code metric matter? My common sense (qua maybe prejudice) says it&#8217;s bullshit.</p>

<p>For everything, there&#8217;s a point of diminishing return. Extreme programming&#8217;s motto is that if X is good, then more X the better. Testing is good, so test always. Which is obviously insane, but probably said to be provocative. Individually we have to decide when good enough is enough. Sometimes good is more than enough, so a waste of time.</p>

<p>And stepping out a bit, I have serious doubt that minute technical decisions matter. Programming anxieties such as how we mock objects, or if we are violating Single Responsibility Principle, or we have hard couplings, or a class has too many dependencies, or we violate the Law of Demeter&#8230; maybe none of it really matters.</p>

<p>What matters is to have your product out there for people to use. PHP is plenty good, and Ruby (or your favourite toy) won&#8217;t save you from shit business idea.</p>
</div>


<div id="profile">
  Howard Yeh
</div>

<div id="comments">
  <a href="http://www.metacircus.com/hacking/2010/04/17/real-values.html#disqus_thread">Comments</a>
  <div id="disqus_thread"></div>
  <script type="text/javascript" src="http://disqus.com/forums/metacircus/embed.js"></script>
  <noscript><a href="http://metacircus.disqus.com/?url=ref">View the discussion thread.</a></noscript>
</div>

  </div>

  <div class="sidebar">
    <div id="about" class="section">
      <h3>About Me</h3>
      <img title="Howard Yeh's Likeness" alt="Howard Yeh's Likeness" src="/images/profile.jpg"></img>
      <p><b>Howard Yeh</b>. Thinker. Traveller. Entrepreneur. Hacker. Violinist. </p>
      <p>
        Howard is a Rails freelancer. He is now travelling the world, spending
        less money than staying at home. After 6 months of travel, he saved more
        money in the bank than when he started. Everything he owns fits in a 25L
        backpack.
      </p>
      <p class="follow">
        <em>
          You should <a href="http://twitter.com/hayeah"><b>follow me</b></a>
          around the world.
        </em>
      </p>
    </div>

    <div id="subscribe" class="section links">
      <h3><img src="/images/feed-icon16x16.png"/>Subscribe</h3>
      <a href="http://feeds2.feedburner.com/metacircus">Via RSS feed</a>
      <a href="http://feedburner.google.com/fb/a/mailverify?uri=metacircus&amp;loc=en_US">Get updates by email</a>
    </div>

    <div id="contact" class="section links">
      <h3>Contact Me</h3>
      <a href="mailto:hayeah@gmail.com">hayeah@gmail.com</a>
      <a href="http://twitter.com/hayeah">Follow me on <img src="/images/twitter.png"/> Twitter</a>
    </div>
    
  </div>
  <div class="clear"></div>
  <div class="footer">
    <div class="contact">
      <p>
        <b>Howard Yeh</b>
        <br/>
        <a href="mailto:hayeah@gmail.com">hayeah@gmail.com</a>
        <br/>
        <a href="http://twitter.com/hayeah"><b>@hayeah</b></a>
      </p>
    </div>
  </div>
</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-7576362-1");
pageTracker._trackPageview();
} catch(err) {}</script>


<script type="text/javascript">
//<![CDATA[
(function() {
		var links = document.getElementsByTagName('a');
		var query = '?';
		for(var i = 0; i < links.length; i++) {
			if(links[i].href.indexOf('#disqus_thread') >= 0) {
				query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
			}
		}
		document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/metacircus/get_num_replies.js' + query + '"></' + 'script>');
	})();
//]]>
</script>
</body>
</html>
